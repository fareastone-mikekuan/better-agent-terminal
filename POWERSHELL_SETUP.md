# PowerShell è‡ªåŠ¨åŒ–è®¾ç½®æ–¹æ¡ˆ

## é—®é¢˜
åœ¨å¦ä¸€å°ç”µè„‘å¼€å‘æ—¶ï¼Œå¦‚ä½•è·å–é¡¹ç›®æ‰€éœ€çš„ PowerShellï¼Ÿ

## è§£å†³æ–¹æ¡ˆï¼šè‡ªåŠ¨åŒ–è®¾ç½®

### å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼€å‘è€… Clone ä»“åº“                        â”‚
â”‚  git clone <repo>                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿è¡Œ npm install                         â”‚
â”‚  - å®‰è£… Node.js ä¾èµ–                      â”‚
â”‚  - è§¦å‘ postinstall hook                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è‡ªåŠ¨æ‰§è¡Œ setup-powershell.js             â”‚
â”‚  1. æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨ PowerShell             â”‚
â”‚  2. å¦‚æœä¸å­˜åœ¨ï¼Œè‡ªåŠ¨ä¸‹è½½ (~110MB)         â”‚
â”‚  3. è§£å‹åˆ° packages/PowerShell/           â”‚
â”‚  4. éªŒè¯å®‰è£…                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®Œæˆï¼å¯ä»¥å¼€å§‹å¼€å‘                        â”‚
â”‚  PowerShell å·²å‡†å¤‡å¥½                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–‡ä»¶ç»“æ„

```
better-agent-terminal/
â”œâ”€â”€ package.json                    # postinstall hook
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ setup-powershell.js         # Node.js è‡ªåŠ¨è®¾ç½®è„šæœ¬
â”œâ”€â”€ setup-powershell.ps1            # PowerShell æ‰‹åŠ¨è®¾ç½®è„šæœ¬ï¼ˆå¤‡ç”¨ï¼‰
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ PowerShell/                 # PowerShell 7.5.4 (gitignore)
â”‚   â”‚   â”œâ”€â”€ pwsh.exe               # âœ… è‡ªåŠ¨ä¸‹è½½
â”‚   â”‚   â””â”€â”€ ...                    # æ‰€æœ‰å¿…éœ€æ–‡ä»¶
â”‚   â””â”€â”€ README.md                   # è¯¦ç»†è¯´æ˜
â””â”€â”€ .gitignore                      # packages/PowerShell/ ä¸æäº¤
```

### ä¼˜ç‚¹ âœ…

1. **é›¶æ‰‹åŠ¨æ“ä½œ** - å¼€å‘è€…åªéœ€è¿è¡Œ `npm install`
2. **è½»é‡ä»“åº“** - ä¸æäº¤ 250MB äºŒè¿›åˆ¶æ–‡ä»¶
3. **æ™ºèƒ½æ£€æµ‹** - å·²å­˜åœ¨æ—¶è·³è¿‡ä¸‹è½½
4. **è·¨å¹³å°æ”¯æŒ** - ä»…åœ¨ Windows ä¸Šä¸‹è½½
5. **å®¹é”™æ€§å¥½** - å¤±è´¥æ—¶æä¾›æ‰‹åŠ¨æ­¥éª¤

### å®ç°ç»†èŠ‚

#### package.json
```json
{
  "scripts": {
    "postinstall": "npm run setup:powershell && ...",
    "setup:powershell": "node scripts/setup-powershell.js"
  }
}
```

#### scripts/setup-powershell.js
- æ£€æµ‹æ“ä½œç³»ç»Ÿï¼ˆä»… Windowsï¼‰
- æ£€æŸ¥ `packages/PowerShell/pwsh.exe` æ˜¯å¦å­˜åœ¨
- ä½¿ç”¨ HTTPS ä¸‹è½½ PowerShell-7.5.4-win-x64.zip
- æ˜¾ç¤ºä¸‹è½½è¿›åº¦ï¼ˆæ¯ 10% æ›´æ–°ï¼‰
- ä½¿ç”¨ PowerShell å‘½ä»¤è§£å‹
- éªŒè¯å®‰è£…
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶

### ä½¿ç”¨åœºæ™¯

#### åœºæ™¯ 1ï¼šé¦–æ¬¡ Cloneï¼ˆæ–°å¼€å‘è€…ï¼‰
```bash
git clone <repo>
cd better-agent-terminal
npm install              # â† è‡ªåŠ¨ä¸‹è½½ PowerShell
npm run compile
npm start
```

#### åœºæ™¯ 2ï¼šå·²æœ‰ PowerShellï¼ˆé‡å¤å®‰è£…ï¼‰
```bash
npm install              # â† æ£€æµ‹åˆ°å·²å­˜åœ¨ï¼Œè·³è¿‡ä¸‹è½½ï¼ˆ< 1ç§’ï¼‰
```

#### åœºæ™¯ 3ï¼šé Windows ç³»ç»Ÿ
```bash
npm install              # â† æ£€æµ‹åˆ°é Windowsï¼Œè·³è¿‡ï¼ˆ< 1ç§’ï¼‰
```

#### åœºæ™¯ 4ï¼šè‡ªåŠ¨ä¸‹è½½å¤±è´¥ï¼ˆç½‘ç»œé—®é¢˜ï¼‰
```bash
npm install              # â† å¤±è´¥ï¼Œæ˜¾ç¤ºæ‰‹åŠ¨æ­¥éª¤

# æ–¹æ³• 1ï¼šé‡è¯•
npm run setup:powershell

# æ–¹æ³• 2ï¼šPowerShell è„šæœ¬
./setup-powershell.ps1

# æ–¹æ³• 3ï¼šå®Œå…¨æ‰‹åŠ¨
# 1. ä¸‹è½½ https://github.com/PowerShell/PowerShell/releases/...
# 2. è§£å‹åˆ° packages/PowerShell/
```

### æ—¶é—´å¯¹æ¯”

| æ“ä½œ | ä¼ ç»Ÿæ–¹å¼ | è‡ªåŠ¨åŒ–æ–¹å¼ |
|------|---------|-----------|
| é¦–æ¬¡è®¾ç½® | 5-10 åˆ†é’Ÿï¼ˆæ‰‹åŠ¨ï¼‰ | 2-3 åˆ†é’Ÿï¼ˆè‡ªåŠ¨ï¼‰ |
| é‡å¤å®‰è£… | éœ€è¦è®°ä½æ­¥éª¤ | < 1 ç§’ï¼ˆè·³è¿‡ï¼‰ |
| æ–°å¼€å‘è€… | éœ€è¦æ–‡æ¡£æŒ‡å¯¼ | æ— éœ€é¢å¤–æ“ä½œ |

### æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡å®‰è£…è¾ƒæ…¢** - éœ€è¦ä¸‹è½½ 110MBï¼Œçº¦ 1-2 åˆ†é’Ÿï¼ˆå–å†³äºç½‘é€Ÿï¼‰
2. **ç£ç›˜ç©ºé—´** - è§£å‹åçº¦ 250MB
3. **ç½‘ç»œä¾èµ–** - éœ€è¦è®¿é—® GitHub Releases
4. **Windows ä¸“ç”¨** - å…¶ä»–ç³»ç»Ÿä¸éœ€è¦ä¹Ÿä¸ä¼šä¸‹è½½

### é…ç½®

åº”ç”¨é»˜è®¤é…ç½®ï¼š
- Shell Type: `custom`
- Shell Path: `packages/PowerShell/pwsh.exe`ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰

ç”¨æˆ·å¯åœ¨è®¾ç½®ä¸­ä¿®æ”¹ä¸ºç³»ç»Ÿå®‰è£…çš„ PowerShellã€‚

---

## æ€»ç»“

âœ… **é—®é¢˜å·²è§£å†³ï¼**

åœ¨å¦ä¸€å°ç”µè„‘å¼€å‘æ—¶ï¼š
1. Clone ä»“åº“
2. è¿è¡Œ `npm install`
3. PowerShell **è‡ªåŠ¨ä¸‹è½½å¹¶é…ç½®**
4. å¼€å§‹å¼€å‘

**æ— éœ€ä»»ä½•é¢å¤–æ­¥éª¤ï¼** ğŸ‰
