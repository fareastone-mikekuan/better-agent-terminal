# 新技能系統使用說明

## 概述

新的技能系統採用集中式管理，技能不再依賴於工作區資料夾，而是作為獨立的配置存儲在系統中。

## 核心概念

### 1. 技能 (Skill)
- 獨立的配置，包含名稱、描述、類別、標籤和執行步驟
- 存儲在 localStorage 中，可以匯入/匯出
- 可以從模板創建或自行定義

### 2. 工作區關聯技能
- 一個工作區可以關聯多個技能
- 在技能面板中只顯示當前工作區關聯的技能
- 執行技能時，所有終端機標籤會創建在當前工作區

### 3. 技能步驟 (SkillStep)
- 每個技能包含一系列步驟
- 支持類型：終端機、API、資料庫、網頁、檔案
- 每個步驟可以配置不同的參數

## 使用流程

### 1. 管理技能（技能庫）

**打開技能庫：**
- 點擊左側 Sidebar 的「📚 技能庫」按鈕

**新增技能：**
1. 點擊「➕ 新增技能」
2. 填寫基本資訊（名稱、描述、類別、圖示、標籤）
3. 切換到「執行步驟」分頁
4. 點擊「➕ 新增步驟」添加執行步驟
5. 配置每個步驟的類型和參數
6. 點擊「儲存」

**從模板創建：**
1. 在技能庫中點擊「📝 模板」
2. 選擇一個模板（如：NPM 開發伺服器、Git 提交推送、API 測試）
3. 輸入技能名稱
4. 可以再編輯調整

**匯入技能：**
1. 點擊「📥 匯入」
2. 選擇 `.json` 或 `.skill.json` 檔案
3. 可以匯入單個技能或批次匯入

**匯出技能：**
- 單個匯出：點擊技能卡片的「📤 匯出」按鈕
- 批次匯出：點擊「📤 匯出全部」按鈕

### 2. 在工作區使用技能（技能面板）

**打開技能面板：**
- 點擊左側 Sidebar 的「🎯 技能」按鈕

**關聯技能到工作區：**
1. 確保已選擇工作區
2. 在技能面板中點擊「⚙️ 管理工作區技能」
3. 在彈出的對話框中選擇要關聯的技能
4. 確認後，這些技能會顯示在面板中

**執行技能：**
1. 在技能面板中點擊技能卡片展開詳情
2. 查看執行流程中的所有步驟
3. 點擊「▶ 執行技能」開始執行
4. 系統會依序執行每個步驟
5. 創建的終端機標籤會自動歸屬於當前工作區

## 技能配置格式

### 技能 JSON 格式
```json
{
  "id": "skill-xxx",
  "name": "技能名稱",
  "description": "技能描述",
  "category": "development",
  "tags": ["tag1", "tag2"],
  "icon": "🚀",
  "steps": [
    {
      "id": "step-1",
      "type": "terminal",
      "name": "步驟名稱",
      "description": "步驟描述",
      "config": {
        "command": "npm install"
      }
    }
  ],
  "createdAt": 1234567890,
  "updatedAt": 1234567890
}
```

### 步驟類型配置

**終端機 (terminal)：**
```json
{
  "type": "terminal",
  "config": {
    "command": "npm run dev"
  }
}
```

**API (api)：**
```json
{
  "type": "api",
  "config": {
    "method": "POST",
    "url": "https://api.example.com/data",
    "headers": {
      "Content-Type": "application/json"
    },
    "body": "{\"key\": \"value\"}"
  }
}
```

**資料庫 (db)：**
```json
{
  "type": "db",
  "config": {
    "query": "SELECT * FROM users",
    "connection": "main"
  }
}
```

**網頁 (web)：**
```json
{
  "type": "web",
  "config": {
    "webUrl": "https://example.com"
  }
}
```

**檔案 (file)：**
```json
{
  "type": "file",
  "config": {
    "action": "read",
    "path": "/path/to/file.txt"
  }
}
```

## 內建模板

系統提供以下預設模板：

### 1. NPM 開發伺服器
- 類別：開發
- 步驟：
  1. `npm install` - 安裝依賴
  2. `npm run dev` - 啟動開發伺服器

### 2. Git 提交推送
- 類別：開發
- 步驟：
  1. `git status` - 查看狀態
  2. `git add .` - 添加變更
  3. `git commit -m "Update"` - 提交變更
  4. `git push` - 推送到遠端

### 3. API 測試
- 類別：測試
- 步驟：
  1. GET 請求測試
  2. POST 請求測試

## 技能類別

系統預設類別：
- 💻 開發 (development)
- 🧪 測試 (testing)
- 🚀 部署 (deployment)
- 🗄️ 資料庫 (database)
- 🔌 API (api)
- ⚙️ 自動化 (automation)
- 📦 其他 (other)

## 優勢

1. **集中管理**：所有技能在一個地方管理，不依賴工作區資料夾
2. **可重用**：同一個技能可以在多個工作區使用
3. **易於分享**：通過匯出/匯入 JSON 檔案分享技能
4. **模板支持**：提供常用場景的模板，快速創建
5. **視覺化流程**：執行前可以看到完整的步驟流程
6. **彈性配置**：支持多種步驟類型和參數配置

## 與舊系統的區別

| 特性 | 舊系統 | 新系統 |
|------|--------|--------|
| 存儲位置 | 工作區資料夾中的 skill.md | localStorage（獨立配置） |
| 依賴性 | 依賴工作區資料夾 | 獨立於工作區 |
| 格式 | Markdown | JSON |
| 編輯方式 | 手動編輯 Markdown | 圖形化介面編輯 |
| 可重用性 | 需要複製資料夾 | 直接關聯到多個工作區 |
| 分享 | 分享整個資料夾 | 匯出/匯入 JSON 檔案 |
| 模板 | 無 | 內建多個模板 |

## 注意事項

1. 技能配置存儲在瀏覽器的 localStorage 中，建議定期備份
2. 匯出功能可以備份所有技能配置
3. 工作區關聯的技能 ID 存儲在工作區配置中
4. 刪除技能不會影響工作區，只是無法再執行該技能
5. 技能執行時會依序創建面板，請確保系統回調已正確註冊
