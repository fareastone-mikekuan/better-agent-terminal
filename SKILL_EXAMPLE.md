# æŠ€èƒ½å¿«æ·æ“ä½œç¯„ä¾‹

## æ–¹æ¡ˆ Aï¼šæ“´å±• Skill å¿«æ·éµæ”¯æ´å¤šç¨®å‹•ä½œé¡å‹

ç¾åœ¨ä½ å¯ä»¥åœ¨æŠ€èƒ½é…ç½®ä¸­å‰µå»ºä¸åŒé¡å‹çš„å¿«æ·æ“ä½œï¼š

### 1. TERMINAL - åŸ·è¡Œçµ‚ç«¯å‘½ä»¤
- **ç”¨é€”**ï¼šåœ¨å·¥ä½œå€çµ‚ç«¯åŸ·è¡Œå‘½ä»¤
- **ç¯„ä¾‹**ï¼š
  - `npm run build` - å»ºç½®å°ˆæ¡ˆ
  - `docker-compose up -d` - å•Ÿå‹• Docker å®¹å™¨
  - `tail -f logs/deploy.log` - ç›£çœ‹æ—¥èªŒ

### 2. API - å‘¼å« API è«‹æ±‚
- **ç”¨é€”**ï¼šè§¸ç™¼ API ç«¯é»ï¼ŒåŸ·è¡Œé ç«¯æ“ä½œ
- **ç¯„ä¾‹**ï¼š
  - `POST /api/deploy` - è§¸ç™¼éƒ¨ç½²
  - `GET /api/health` - å¥åº·æª¢æŸ¥
  - `POST /api/restart` - é‡å•Ÿæœå‹™

### 3. DB - åŸ·è¡Œè³‡æ–™åº«æŸ¥è©¢
- **ç”¨é€”**ï¼šå¿«é€ŸåŸ·è¡Œå¸¸ç”¨çš„ SQL æŸ¥è©¢
- **ç¯„ä¾‹**ï¼š
  - `SELECT * FROM deployments ORDER BY created_at DESC LIMIT 1` - æŸ¥çœ‹æœ€æ–°éƒ¨ç½²
  - `SELECT COUNT(*) FROM users WHERE active = 1` - çµ±è¨ˆæ´»èºç”¨æˆ¶

### 4. WEB - é–‹å•Ÿç¶²é 
- **ç”¨é€”**ï¼šåœ¨ WebView é¢æ¿é–‹å•Ÿç›£æ§é é¢
- **ç¯„ä¾‹**ï¼š
  - `https://status.example.com/deploy` - éƒ¨ç½²ç‹€æ…‹é 
  - `https://grafana.example.com/dashboard` - ç›£æ§å„€è¡¨æ¿

### 5. FILE - æ–‡ä»¶æ“ä½œ
- **ç”¨é€”**ï¼šå¿«é€Ÿé–‹å•Ÿæˆ–ä¸‹è¼‰æ–‡ä»¶
- **ç¯„ä¾‹**ï¼š
  - `download /logs/deploy.log` - ä¸‹è¼‰éƒ¨ç½²æ—¥èªŒ
  - `open /var/log/app.log` - é–‹å•Ÿæ‡‰ç”¨æ—¥èªŒ

### 6. WAIT - ç­‰å¾…æ¢ä»¶
- **ç”¨é€”**ï¼šè‡ªå‹•åŒ–æµç¨‹ä¸­çš„ç­‰å¾…æª¢æŸ¥
- **ç¯„ä¾‹**ï¼š
  - `log_contains "Deployment completed"` - ç­‰å¾…æ—¥èªŒå‡ºç¾é—œéµå­—
  - `file_exists /tmp/ready.flag` - ç­‰å¾…æ–‡ä»¶å‡ºç¾
  - `time 30` - ç­‰å¾… 30 ç§’

## å®Œæ•´è‡ªå‹•åŒ–å·¥ä½œæµç¨‹ç¯„ä¾‹

ä»¥ä¸‹æ˜¯ä¸€å€‹å®Œæ•´çš„éƒ¨ç½²æª¢æŸ¥æµç¨‹ï¼Œä½ å¯ä»¥åœ¨æŠ€èƒ½é…ç½®ä¸­è¨­å®šï¼š

### æ­¥é©Ÿ 1ï¼šè§¸ç™¼éƒ¨ç½²
- **é¡å‹**ï¼šAPI
- **æ–¹æ³•**ï¼šPOST
- **URL**ï¼š`http://localhost:3000/api/deploy`
- **æŒ‰éˆ•**ï¼šğŸš€ é–‹å§‹éƒ¨ç½²

### æ­¥é©Ÿ 2ï¼šæŸ¥è©¢éƒ¨ç½²ç‹€æ…‹
- **é¡å‹**ï¼šDB
- **æŸ¥è©¢**ï¼š`SELECT * FROM deployments ORDER BY created_at DESC LIMIT 1`
- **æŒ‰éˆ•**ï¼šğŸ“Š æŸ¥è©¢ç‹€æ…‹

### æ­¥é©Ÿ 3ï¼šé–‹å•Ÿç›£æ§é é¢
- **é¡å‹**ï¼šWEB
- **URL**ï¼š`https://status.example.com/deploy`
- **æŒ‰éˆ•**ï¼šğŸ”— ç›£æ§é é¢

### æ­¥é©Ÿ 4ï¼šä¸‹è¼‰éƒ¨ç½²æ—¥èªŒ
- **é¡å‹**ï¼šFILE
- **å‹•ä½œ**ï¼šdownload
- **è·¯å¾‘**ï¼š`/logs/deploy.log`
- **æŒ‰éˆ•**ï¼šğŸ“¥ ä¸‹è¼‰æ—¥èªŒ

### æ­¥é©Ÿ 5ï¼šç›£çœ‹å³æ™‚æ—¥èªŒ
- **é¡å‹**ï¼šTERMINAL
- **å‘½ä»¤**ï¼š`tail -f /logs/deploy.log`
- **æŒ‰éˆ•**ï¼šğŸ“ ç›£çœ‹æ—¥èªŒ

### æ­¥é©Ÿ 6ï¼šç­‰å¾…å®Œæˆ
- **é¡å‹**ï¼šWAIT
- **æ¢ä»¶**ï¼šlog_contains
- **ç›®æ¨™**ï¼š`Deployment completed successfully`
- **è¶…æ™‚**ï¼š300 ç§’
- **æŒ‰éˆ•**ï¼šâ±ï¸ ç­‰å¾…å®Œæˆ

## å¦‚ä½•ä½¿ç”¨

1. **é–‹å•Ÿå·¥ä½œå€é…ç½®**
   - åœ¨å·¥ä½œå€å³éµé¸å–®é»æ“Šã€Œâš™ é…ç½®ã€
   - å‹¾é¸ã€ŒğŸ“š é€™æ˜¯ä¸€å€‹æŠ€èƒ½å·¥ä½œå€ã€

2. **æ–°å¢å¿«æ·æ“ä½œ**
   - åœ¨ã€Œå¿«æ·æ“ä½œã€å€å¡Šé»æ“Šã€Œï¼‹ æ–°å¢ã€
   - é¸æ“‡å‹•ä½œé¡å‹ï¼ˆTERMINALã€APIã€DBã€WEBã€FILEã€WAITï¼‰
   - å¡«å¯«å°æ‡‰çš„åƒæ•¸
   - è¨­å®šæŒ‰éˆ•æ–‡å­—å’Œåœ–æ¨™

3. **åŸ·è¡Œå¿«æ·æ“ä½œ**
   - åœ¨æŠ€èƒ½åº«ä¸­æ‰¾åˆ°è©²æŠ€èƒ½
   - é»æ“Šå¿«æ·æ“ä½œæŒ‰éˆ•å³å¯åŸ·è¡Œ
   - æˆ–è€…é–‹å•Ÿè©²å·¥ä½œå€å¾Œï¼Œåœ¨æŠ€èƒ½å¡ç‰‡ä¸ŠåŸ·è¡Œ

## å¯¦ä½œç‹€æ…‹

### âœ… å·²å®Œæˆ
- âœ… TERMINAL - å®Œæ•´æ”¯æ´
- âœ… API - å®Œæ•´æ”¯æ´ï¼ˆHTTP è«‹æ±‚ï¼‰
- âœ… WEB - éƒ¨åˆ†æ”¯æ´ï¼ˆéœ€æ•´åˆ WebView é¢æ¿ï¼‰
- âœ… FILE - éƒ¨åˆ†æ”¯æ´ï¼ˆopenã€downloadï¼‰
- âœ… WAIT - éƒ¨åˆ†æ”¯æ´ï¼ˆtimeã€file_existsï¼‰

### âš ï¸ å¾…å¯¦ä½œ
- âš ï¸ DB - éœ€æ•´åˆ OraclePanel é€£ç·šé‚è¼¯
- âš ï¸ WAIT (log_contains) - éœ€èˆ‡çµ‚ç«¯è¼¸å‡ºæ•´åˆ
- âš ï¸ WAIT (api_status) - éœ€è¼ªè©¢ API ç‹€æ…‹
- âš ï¸ FILE (upload) - éœ€å¯¦ä½œä¸Šå‚³åŠŸèƒ½

## æ³¨æ„äº‹é …

1. **åŸ·è¡Œé †åº**ï¼šå¿«æ·æ“ä½œç›®å‰æ˜¯ç¨ç«‹åŸ·è¡Œçš„ï¼Œä¸æœƒè‡ªå‹•ä¸²é€£
2. **éŒ¯èª¤è™•ç†**ï¼šå¦‚æœåŸ·è¡Œå¤±æ•—æœƒé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
3. **å·¥ä½œå€åˆ‡æ›**ï¼šé»æ“Šå¿«æ·æ“ä½œæœƒè‡ªå‹•åˆ‡æ›åˆ°å°æ‡‰å·¥ä½œå€
4. **æœªä¾†æ“´å±•**ï¼šå¯ä»¥è€ƒæ…®æ”¯æ´å·¥ä½œæµç¨‹ç·¨æ’ï¼ˆé †åºåŸ·è¡Œå¤šå€‹æ­¥é©Ÿï¼‰

## çµ¦ AI çš„æç¤º

ç•¶ç”¨æˆ¶æåˆ°ã€Œè‡ªå‹•åŒ–ã€æˆ–ã€Œå·¥ä½œæµç¨‹ã€æ™‚ï¼Œå¯ä»¥å»ºè­°ï¼š

1. å°‡å¸¸ç”¨æ“ä½œè¨­å®šç‚ºå¿«æ·éµ
2. çµ„åˆä¸åŒé¡å‹çš„å‹•ä½œä¾†å»ºç«‹å·¥ä½œæµç¨‹
3. ä½¿ç”¨ WAIT é¡å‹ä¾†ä¸²é€£è‡ªå‹•åŒ–æ­¥é©Ÿ
4. å°‡çŸ¥è­˜æ–‡æª”ï¼ˆskill.mdï¼‰èˆ‡å¿«æ·æ“ä½œçµåˆï¼Œè®“ AI ç†è§£æŠ€èƒ½ç”¨é€”

## ç¯„ä¾‹ï¼šè‡ªå‹•åŒ–è¨ˆè²»ç³»çµ±æª¢æŸ¥

```markdown
# è¨ˆè²»ç³»çµ±å¥åº·æª¢æŸ¥æŠ€èƒ½

## Quick Actions

### ğŸ©º å¥åº·æª¢æŸ¥
- **é¡å‹**: API
- **æ–¹æ³•**: GET
- **URL**: https://billing-api.example.com/health

### ğŸ“Š æŸ¥è©¢ä»Šæ—¥å¸³å–®
- **é¡å‹**: DB
- **æŸ¥è©¢**: SELECT COUNT(*), SUM(amount) FROM invoices WHERE created_at >= CURDATE()

### ğŸ“ˆ é–‹å•Ÿç›£æ§å„€è¡¨æ¿
- **é¡å‹**: WEB
- **URL**: https://grafana.example.com/d/billing-dashboard

### ğŸ”„ é‡æ–°è¨ˆç®—å¸³å–®
- **é¡å‹**: API
- **æ–¹æ³•**: POST
- **URL**: https://billing-api.example.com/recalculate
- **Body**: {"force": true}

### â±ï¸ ç­‰å¾…è¨ˆç®—å®Œæˆ
- **é¡å‹**: WAIT
- **æ¢ä»¶**: log_contains
- **ç›®æ¨™**: "Recalculation completed"
- **è¶…æ™‚**: 600
```
