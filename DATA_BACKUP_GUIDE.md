# 📦 數據備份功能使用指南

## 功能概述

Better Agent Terminal 現在支援**完整數據匯出/匯入**功能，讓你可以：

- ✅ 備份所有應用數據到單一 JSON 檔案
- ✅ 跨機器同步設定和工作區
- ✅ 防止數據丟失
- ✅ 快速恢復到之前的狀態

## 📋 備份內容

匯出的數據包含：

### 1. **設定 (Settings)**
- Shell 配置（PowerShell 路徑等）
- 字體、主題、顏色設定
- 環境變數
- Agent 預設值
- 共享面板設定

### 2. **工作區 (Workspaces)**
- 所有工作區配置
- 終端列表和狀態
- 終端路徑 (CWD)
- 面板佈局

### 3. **CHAT 對話記錄 (LocalStorage)**
- 所有 Copilot 對話歷史
- 共用/獨立模式的訊息
- 面板位置和大小設定

### 4. **筆記和程式碼片段**
- 個人筆記
- 共享筆記
- Gist Token

### 5. **其他 LocalStorage 數據**
- Oracle 資料庫連接配置
- 網頁瀏覽器 URL
- API Tester 設定
- 所有面板狀態

## 🚀 使用方法

### 匯出數據

1. 打開**設定面板**（齒輪圖示）
2. 滾動到底部的 **💾 數據備份** 區塊
3. 點擊 **📦 匯出所有數據**
4. 選擇保存位置和檔案名稱
5. 預設檔名格式：`better-terminal-backup-YYYY-MM-DD.json`

**建議備份頻率：**
- 每天工作前/後各備份一次
- 重大更新前備份
- 跨機器使用前備份

### 匯入數據

1. 打開**設定面板**
2. 滾動到底部的 **💾 數據備份** 區塊
3. 點擊 **📥 匯入數據**
4. ⚠️ **警告提示**：確認是否要覆蓋現有數據
5. 選擇之前匯出的 JSON 檔案
6. 匯入成功後，頁面會自動重新載入

⚠️ **注意：匯入會覆蓋所有現有數據！建議先匯出當前數據作為備份。**

## 📂 備份檔案格式

```json
{
  "version": "1.0",
  "exportDate": "2025-12-31T12:00:00.000Z",
  "settings": "{...}",
  "workspaces": "{...}",
  "localStorage": {
    "copilot-messages-shared": "[...]",
    "oracle-tabs": "[...]",
    "snippets": "[...]",
    ...
  }
}
```

## 🔄 跨機器使用

### 方式 1：手動同步
1. 在機器 A 匯出數據
2. 將 JSON 檔案複製到機器 B（USB、雲端硬碟等）
3. 在機器 B 匯入數據

### 方式 2：雲端備份
1. 設定定期備份到 OneDrive/Google Drive/Dropbox
2. 在其他機器上直接從雲端匯入

### 方式 3：Git 版本控制（進階）
```bash
# 在專案目錄建立備份資料夾
mkdir backups
cd backups

# 匯出數據後加入版本控制
git add better-terminal-backup-*.json
git commit -m "Backup terminal state"
git push

# 在其他機器上拉取
git pull
# 然後匯入最新的備份檔案
```

## ⚙️ 自動化備份（待實現）

未來計畫支援：
- [ ] 定時自動備份（每天/每週）
- [ ] 備份保留策略（保留最近 N 個備份）
- [ ] 備份加密（保護敏感資訊）
- [ ] 選擇性匯入（只匯入特定數據）

## 🛡️ 安全建議

1. **敏感資訊**：
   - 備份檔案包含 API Key、Token 等敏感資訊
   - 不要上傳到公開的 Git Repository
   - 建議加密存儲或使用私有倉庫

2. **定期清理**：
   - 定期刪除舊的備份檔案
   - 保留最近 5-10 個備份即可

3. **驗證匯入**：
   - 匯入後檢查關鍵設定是否正確
   - 測試連線和功能是否正常

## 📝 故障排除

### Q: 匯出按鈕沒反應？
A: 檢查檔案系統權限，確保應用有寫入權限。

### Q: 匯入失敗？
A: 檢查 JSON 檔案格式是否正確，確保是從本應用匯出的檔案。

### Q: 匯入後數據不完整？
A: 確認匯入的檔案版本與當前應用版本相容。

### Q: 想只匯入部分數據？
A: 目前不支援選擇性匯入，可手動編輯 JSON 檔案後匯入（進階操作）。

## 🎯 最佳實踐

1. **每日備份**：養成每天結束工作前備份的習慣
2. **命名規範**：使用日期命名，如 `backup-2025-12-31.json`
3. **多重備份**：同時保存在本地和雲端
4. **測試恢復**：定期測試匯入功能是否正常
5. **版本管理**：重要變更前先備份，保留多個版本

## 🔮 未來功能

- GitHub Gist 雲端同步
- 選擇性匯出/匯入
- 備份差異比對
- 自動衝突解決
- 備份加密保護
