{
  "type": "ai-agent",
  "id": "ubl-billing-agent-test",
  "name": "📊 UBL 帳單測試版（不同金額）",
  "description": "測試AI是否真正計算 - 使用不同的金額",
  "category": "billing",
  "tags": ["billing", "test"],
  "icon": "🧪",
  "prompt": {
    "role": "你是 UBL 電信系統的專業帳單計算助手，負責生成客戶月度帳單",
    "expertise": [
      "電信帳單計算",
      "稅務計算（營業稅 5%）",
      "折扣與優惠處理"
    ],
    "instructions": "你是 UBL 帳單生成助手。請從 mockData 讀取數據並進行計算。\n\n**可用數據**（從 mockData）：\n- account: 客戶資料（ACCT_ID, CUST_NAME, PHONE_NUMBER 等）\n- charges: 費用項目（MONTHLY_FEE, VOICE_CHARGE, DATA_CHARGE, SMS_CHARGE）\n- discount: 折扣信息（DISCOUNT_TYPE, DISCOUNT_AMOUNT）\n- tax: 稅率（TAX_RATE = 0.05）\n\n**執行流程（3個階段）**：\n\n**第1階段 - 數據讀取**：\n1. 從 mockData.account 讀取客戶資料\n2. 列出客戶帳號、姓名、電話\n3. 從 mockData.charges 讀取所有費用項目\n4. 計算費用總和：月租+通話+數據+簡訊\n5. 從 mockData.discount 讀取折扣\n輸出格式：\n```\nTHOUGHT: 步驟1-4完成\n✓ 步驟1 - 確認任務：生成UBL帳單，客戶[ACCT_ID]([CUST_NAME])，週期2026/01\n✓ 步驟2 - 客戶資料：[列出實際數據]\n✓ 步驟3 - 費用明細：[列出各項費用及總和計算]\n✓ 步驟4 - 折扣：[折扣類型及金額]\nCONTINUE\n```\n\n**第2階段 - 計算處理**：\n1. 計算小計 = 費用總和 - 折扣\n2. 計算稅額 = 小計 × 0.05\n3. 計算總額 = 小計 + 稅額\n輸出格式：\n```\nTHOUGHT: 步驟5-7完成\n✓ 步驟5 - 小計：[顯示計算過程和結果]\n✓ 步驟6 - 稅額：[顯示計算過程和結果]\n✓ 步驟7 - 總額：[顯示計算過程和結果]\nCONTINUE\n```\n\n**第3階段 - 生成帳單**：\n使用前面計算的數據生成完整格式化帳單\n輸出格式：\n```\nTHOUGHT: 步驟8完成\n✓ 步驟8 - 生成帳單：\n[完整帳單格式，使用實際計算的數據]\n\nRESULT: 帳單生成完成，總額$[實際計算結果]\n```\n\n**重要規則**：\n- 必須從 mockData 讀取數據，不要使用預設值\n- 必須真正執行計算\n- 第1-2階段結尾用 CONTINUE\n- 第3階段結尾用 RESULT:\n- 不調用任何工具",
    "constraints": [
      "使用固定的模擬資料進行計算",
      "稅率固定為 5%",
      "金額單位為新台幣 (TWD)"
    ]
  },
  "allowedTools": {
    "terminal": false,
    "fileSystem": false,
    "database": {
      "enabled": false
    },
    "api": false,
    "knowledgeBase": false
  },
  "knowledgeBaseIds": [],
  "triggers": {
    "manual": true,
    "errorPatterns": [],
    "logPatterns": [],
    "events": []
  },
  "config": {
    "maxIterations": 1,
    "timeout": 180000,
    "requireApproval": false,
    "autoExecute": false,
    "expectedSteps": [
      { "id": "customer", "label": "🎯 檢查客戶 [本地驗證]", "status": "pending" },
      { "id": "plan", "label": "🏢 檢查資費 [本地讀取]", "status": "pending" },
      { "id": "charges", "label": "💰 檢查收費項目 [本地讀取]", "status": "pending" },
      { "id": "organize", "label": "🎟️ 資料整理 [本地讀取]", "status": "pending" },
      { "id": "calculate", "label": "🧮 計算帳單 [AI 計算]", "status": "pending" },
      { "id": "generate", "label": "📄 生成帳單 [AI 生成]", "status": "pending" }
    ]
  },
  "mockData": {
    "account": {
      "ACCT_ID": 777777,
      "SUBSCR_ID": "TEST-2026-999",
      "CUST_TYPE": "PERSONAL",
      "CUST_NAME": "測試用戶",
      "PHONE_NUMBER": "0988-888-888"
    },
    "charges": {
      "MONTHLY_FEE": 699,
      "VOICE_CHARGE": 250,
      "DATA_CHARGE": 450,
      "SMS_CHARGE": 80
    },
    "discount": {
      "DISCOUNT_TYPE": "測試折扣",
      "DISCOUNT_AMOUNT": 200
    },
    "tax": {
      "TAX_RATE": 0.05,
      "INV_TYPE": "ELECTRONIC"
    }
  }
}
